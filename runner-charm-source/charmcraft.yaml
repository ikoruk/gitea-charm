# This file configures Charmcraft.
# See https://juju.is/docs/sdk/charmcraft-config for guidance.

name: kteam-gitea-runner
title: Gitea Runner for Canonical Kernel Team
summary: Gitea Runner for the Canonical Kernel Team
description: |
  Gitea act-runner is used to support Gitea Actions.
  This charm deploys runners for the Canonical Kernel Team.

# (Required)
type: charm

# (Required for 'charm' type)
bases:
  - build-on:
    - name: ubuntu
      channel: "22.04"
    run-on:
    - name: ubuntu
      channel: "22.04"

resources:
  runner-binary:
    type: file
    filename: act_runner
    description: The Act Runner Binary to be used for this deployment

actions:
  register:
    description: Register the runner with a running Gitea instance.
    params:
      gitea-instance-url:
        default: ''
        description: Config for server instance URL.
        type: string
      gitea-instance-token:
        default: ''
        description: Config for server instance token to register the runner.
        type: string
      gitea-runner-name:
        default: ''
        description: Config for runner name.
        type: string
      gitea-runner-labels:
        default: ''
        description: Config for runner labels.
        type: string
    required:
    - gitea-instance-url
    - gitea-instance-token
    - gitea-runner-name
    - gitea-runner-labels
    additionalProperties: false
