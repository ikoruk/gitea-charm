series: jammy
applications:
  kteam-gitea:
    charm: local:kteam-gitea-0
    num_units: 1
    to:
    - "2"
    constraints: arch=amd64
  postgresql:
    charm: postgresql
    channel: 14/stable
    revision: 363
    num_units: 1
    to:
    - "0"
    constraints: arch=amd64
    storage:
      pgdata: rootfs,1,1024M
  s3-integrator:
    charm: s3-integrator
    channel: stable
    revision: 13
    num_units: 1
    to:
    - "1"
    options:
      bucket: kerneltestbucket
      endpoint: https://s3.us-west-2.amazonaws.com
      path: /postgresql-test
      region: us-west-2
    constraints: arch=amd64
machines:
  "0":
    constraints: arch=amd64
  "1":
    constraints: arch=amd64
  "2":
    constraints: arch=amd64
relations:
- - s3-integrator:s3-credentials
  - postgresql:s3-parameters
- - postgresql:database
  - kteam-gitea:database
